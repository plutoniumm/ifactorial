import{a as M,d as K,f as D}from"../chunks/BoSxuPc0.js";import"../chunks/Vj2otop3.js";import{af as L,W as A,g as n,r as _,c as F,s as R,aa as X,aB as it,aC as ot,ac as tt,ab as I,B as q,ad as st,w as ct}from"../chunks/C97ByKIQ.js";import{e as Z,i as H}from"../chunks/DZe1zGN5.js";import{i as et}from"../chunks/CGskxf4h.js";import{p as N}from"../chunks/uPlZYyUc.js";import{s as T,r as ft}from"../chunks/Dd9MXhMU.js";import{s as k,e as J}from"../chunks/Je7lUI0z.js";import{s as ut}from"../chunks/BUKY9MHB.js";import{i as lt}from"../chunks/BDZyvnhW.js";import{b as vt,F as dt}from"../chunks/BLjOXob-.js";var ht=K("<rect></rect>"),mt=K('<svg class="d-b svelte-1oxmzpg"></svg>');function pt(r,i){let c=N(i,"seed",8),u=N(i,"width",8,1e3),o=N(i,"height",8,1e3);function d(v){return function(){let t=v+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}const p=d(c());let h=[];const w=32;function C(v){const{x:t,y:a,w:l,h:m}=v;if(l<w*2&&m<w*2){h.push(v);return}const x=p()>.5;if(x&&m>=w*2){const s=(.3+p()*.4)*m,j={x:t,y:a,w:l,h:s},y={x:t,y:a+s,w:l,h:m-s};C(j),C(y)}else if(!x&&l>=w*2){const s=(.3+p()*.4)*l,j={x:t,y:a,w:s,h:m},y={x:t+s,y:a,w:l-s,h:m};C(j),C(y)}else h.push(v)}C({x:0,y:0,w:u(),h:o()});const b=["#FBB","#FDA","#FFB","#DFC","#AFF","#ACF","#CBF","#FCF","none"],e=()=>b[Math.floor(p()*b.length)];var f=mt();Z(f,5,()=>h,H,(v,t)=>{var a=ht();L(l=>{T(a,"x",(n(t),A(()=>n(t).x))),T(a,"y",(n(t),A(()=>n(t).y))),T(a,"width",(n(t),A(()=>n(t).w))),T(a,"height",(n(t),A(()=>n(t).h))),T(a,"fill",l)},[()=>A(e)]),M(v,a)}),_(f),L(()=>{T(f,"width",u()),T(f,"height",o()),T(f,"viewBox",`0 0 ${u()??""} ${o()??""}`)}),M(r,f)}var gt=D('<a class="rpm-10 d-b p-rel ptr f-col rx20 svelte-53ruq"><!> <div class="p-abs f-col j-ct fw7 year svelte-53ruq"> </div></a>');function _t(r,i){let c=N(i,"url",8),u=N(i,"name",8);var o=gt(),d=F(o);ut(d,i,"default",{});var p=R(d,2),h=F(p,!0);_(p),_(o),L(()=>{T(o,"href",c()),k(h,u())}),M(r,o)}var Q={},$={},z=34,S=10,Y=13;function rt(r){return new Function("d","return {"+r.map(function(i,c){return JSON.stringify(i)+": d["+c+'] || ""'}).join(",")+"}")}function wt(r,i){var c=rt(r);return function(u,o){return i(c(u),o,r)}}function G(r){var i=Object.create(null),c=[];return r.forEach(function(u){for(var o in u)o in i||c.push(i[o]=o)}),c}function g(r,i){var c=r+"",u=c.length;return u<i?new Array(i-u+1).join(0)+c:c}function Ct(r){return r<0?"-"+g(-r,6):r>9999?"+"+g(r,6):g(r,4)}function bt(r){var i=r.getUTCHours(),c=r.getUTCMinutes(),u=r.getUTCSeconds(),o=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Ct(r.getUTCFullYear())+"-"+g(r.getUTCMonth()+1,2)+"-"+g(r.getUTCDate(),2)+(o?"T"+g(i,2)+":"+g(c,2)+":"+g(u,2)+"."+g(o,3)+"Z":u?"T"+g(i,2)+":"+g(c,2)+":"+g(u,2)+"Z":c||i?"T"+g(i,2)+":"+g(c,2)+"Z":"")}function yt(r){var i=new RegExp('["'+r+`
\r]`),c=r.charCodeAt(0);function u(e,f){var v,t,a=o(e,function(l,m){if(v)return v(l,m-1);t=l,v=f?wt(l,f):rt(l)});return a.columns=t||[],a}function o(e,f){var v=[],t=e.length,a=0,l=0,m,x=t<=0,s=!1;e.charCodeAt(t-1)===S&&--t,e.charCodeAt(t-1)===Y&&--t;function j(){if(x)return $;if(s)return s=!1,Q;var U,B=a,E;if(e.charCodeAt(B)===z){for(;a++<t&&e.charCodeAt(a)!==z||e.charCodeAt(++a)===z;);return(U=a)>=t?x=!0:(E=e.charCodeAt(a++))===S?s=!0:E===Y&&(s=!0,e.charCodeAt(a)===S&&++a),e.slice(B+1,U-1).replace(/""/g,'"')}for(;a<t;){if((E=e.charCodeAt(U=a++))===S)s=!0;else if(E===Y)s=!0,e.charCodeAt(a)===S&&++a;else if(E!==c)continue;return e.slice(B,U)}return x=!0,e.slice(B,t)}for(;(m=j())!==$;){for(var y=[];m!==Q&&m!==$;)y.push(m),m=j();f&&(y=f(y,l++))==null||v.push(y)}return v}function d(e,f){return e.map(function(v){return f.map(function(t){return b(v[t])}).join(r)})}function p(e,f){return f==null&&(f=G(e)),[f.map(b).join(r)].concat(d(e,f)).join(`
`)}function h(e,f){return f==null&&(f=G(e)),d(e,f).join(`
`)}function w(e){return e.map(C).join(`
`)}function C(e){return e.map(b).join(r)}function b(e){return e==null?"":e instanceof Date?bt(e):i.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:u,parseRows:o,format:p,formatBody:h,formatRows:w,formatRow:C,formatValue:b}}var Ft=yt(","),jt=Ft.parse,At=D('<a class="row d-g al-ct svelte-153i7me"><div> </div> <div> </div> <div><i> </i></div> <div><kbd> </kbd></div></a>'),Tt=D('<div class="wrap flow-y-s svelte-153i7me"><div class="grid d-g svelte-153i7me"><div class="head d-g al-ct p-stx fw7 svelte-153i7me"><div>Year</div> <div>Title</div> <div>Author</div> <div>ISBN</div></div> <!></div></div>'),xt=D('<section class="search rx10 p0 mx-a w-100 svelte-153i7me"><input type="text" class="p10 sw-100 d-b svelte-153i7me" placeholder="Search" id="global"/> <!></section>');function Bt(r,i){X(i,!1);const c=q(),u=["author","name","isbn","year"];let o=q(""),d=q([]),p=[],h;async function w(){if(h)return;const t=await fetch("/search.csv").then(l=>l.text()),a=u.join(",")+`
`;p=jt(a+t),h=new dt(p,{keys:u,threshold:.4,ignoreLocation:!0,minMatchCharLength:2})}function C(){const t=n(o).trim();if(!h||t.length<=2){I(d,[]);return}I(d,(h?.search(t)||[]).map(a=>a.item))}it(()=>(n(o),n(d)),()=>{I(c,n(o).trim().length>2&&n(d).length>0)}),ot(),et();var b=xt(),e=F(b);ft(e);var f=R(e,2);{var v=t=>{var a=Tt(),l=F(a),m=R(F(l),2);Z(m,1,()=>n(d),H,(x,s)=>{var j=At(),y=F(j),U=F(y,!0);_(y);var B=R(y,2),E=F(B,!0);_(B);var O=R(B,2),P=F(O),at=F(P,!0);_(P),_(O);var V=R(O,2),W=F(V),nt=F(W,!0);_(W),_(V),_(j),L(()=>{T(j,"href",`/${n(s),A(()=>n(s).year)??""}#${n(s),A(()=>n(s).isbn)??""}`),k(U,(n(s),A(()=>n(s).year))),k(E,(n(s),A(()=>n(s).name))),k(at,(n(s),A(()=>n(s).author))),k(nt,(n(s),A(()=>n(s).isbn)))}),M(x,j)}),_(l),_(a),M(t,a)};lt(f,t=>{n(c)&&t(v)})}_(b),vt(e,()=>n(o),t=>I(o,t)),J("focus",e,w),J("input",e,C),M(r,b),tt()}var Et=D('<!> <section class="f fw j-ar"></section>',1);function $t(r,i){X(i,!1);const u=N(i,"data",24,()=>[])().files.map(h=>h.replace(".csv",""));et();var o=Et(),d=st(o);Bt(d,{});var p=R(d,2);Z(p,5,()=>u,H,(h,w)=>{_t(h,{get url(){return`/${n(w)??""}`},get name(){return n(w)},children:(C,b)=>{{let e=ct(()=>n(w)-2021);pt(C,{get seed(){return n(e)},height:150,width:300})}},$$slots:{default:!0}})}),_(p),M(r,o),tt()}export{$t as component};
